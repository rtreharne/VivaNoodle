{% extends "tool/base.html" %}
{% block content %}

<h2>Behaviour Logs</h2>

<div class="card">
    <p><strong>Student:</strong> {{ session.submission.user_id }}</p>
    <p><strong>Assignment:</strong> {{ session.submission.assignment.title }}</p>
    <p><strong>Session Started:</strong> {{ session.started_at }}</p>
</div>

<div class="card">
    <table style="width:100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom:1px solid #ccc;">
                <th style="padding:6px; text-align:left;">Timestamp</th>
                <th style="padding:6px; text-align:left;">Event</th>
                <th style="padding:6px; text-align:left;">Details</th>
            </tr>
        </thead>

        <tbody>
        {% for log in logs %}
            <tr style="border-bottom:1px solid #eee;">
                <td style="padding:6px;">{{ log.timestamp }}</td>
                <td style="padding:6px;">{{ log.event_type }}</td>
                <td style="padding:6px;">
                    <pre style="margin:0; white-space:pre-wrap; font-family:inherit;">
{{ log.event_data|json_script:"_" }}
                    </pre>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="3" style="padding:10px;">No logs recorded.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<a href="{% url 'viva_summary' session.id %}" class="button">Back to Viva Summary</a>

{% endblock %}
