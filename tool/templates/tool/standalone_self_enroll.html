{% extends "tool/standalone_base.html" %}
{% block page_title %}Join assignment{% endblock %}
{% block content %}
<div class="standalone-header">
    <div>
        <p class="eyebrow">Self-enrol</p>
        <h2>{{ assignment.title }}</h2>
        {% if allowed_domain %}
            <p class="lede">Only emails ending with @{{ allowed_domain }} can join.</p>
        {% else %}
            <p class="lede">Use the form below to join this assignment.</p>
        {% endif %}
    </div>
</div>

{% if error %}
    <div class="alert error">{{ error }}</div>
{% endif %}
{% if logged_in_user %}
    <div class="alert error">You are logged in as {{ logged_in_user }}. <a class="link" href="{% url 'standalone_logout' %}">Log out</a> to switch accounts.</div>
{% endif %}

<div class="settings-grid max-two">
    <div class="settings-form-card">
        <div class="settings-card-head">
            <h3 class="settings-title">Create account</h3>
        </div>
        <form method="post" class="settings-grid single-column">
            {% csrf_token %}
            <input type="hidden" name="action" value="register">
            <div class="settings-row">
                <label for="register-name">Name</label>
                <input id="register-name" name="name" type="text" placeholder="Your name">
            </div>
            <div class="settings-row">
                <label for="register-email">Email</label>
                <input id="register-email" name="email" type="email" required>
            </div>
            <div class="settings-row">
                <label for="register-password">Password</label>
                <input id="register-password" name="password" type="password" required>
            </div>
            <div class="settings-actions">
                <button type="submit" class="view-btn">Create account and join</button>
            </div>
        </form>
    </div>

    <div class="settings-form-card">
        <div class="settings-card-head">
            <h3 class="settings-title">Log in</h3>
        </div>
        <form method="post" class="settings-grid single-column">
            {% csrf_token %}
            <input type="hidden" name="action" value="login">
            <div class="settings-row">
                <label for="login-email">Email</label>
                <input id="login-email" name="email" type="email" required>
            </div>
            <div class="settings-row">
                <label for="login-password">Password</label>
                <input id="login-password" name="password" type="password" required>
            </div>
            <div class="settings-actions">
                <button type="submit" class="view-btn">Log in and join</button>
            </div>
        </form>
        <p class="muted center-text signup-hint">Forgot your password? <a class="link" href="{% url 'standalone_self_enroll_password_reset' assignment.self_enroll_token %}">Reset it</a></p>
    </div>
</div>
{% endblock %}
